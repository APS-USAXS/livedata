
<!doctype html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module pvwatch</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>pvwatch</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/beams21/S15USAXS/Documents/eclipse/USAXS/livedata/pvwatch.py">/home/beams21/S15USAXS/Documents/eclipse/USAXS/livedata/pvwatch.py</a></font></td></tr></table>
    <p><tt>watch&nbsp;the&nbsp;USAXS&nbsp;EPICS&nbsp;process&nbsp;variables&nbsp;and<br>
write&nbsp;them&nbsp;to&nbsp;a&nbsp;file&nbsp;periodically<br>
&nbsp;<br>
Start&nbsp;this&nbsp;with&nbsp;the&nbsp;shell&nbsp;command<br>
/APSshare/bin/python&nbsp;./pvwatch.py&nbsp;&gt;&gt;&amp;&nbsp;log.txt</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#fffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="xml.etree.ElementTree.html">xml.etree.ElementTree</a><br>
<a href="datetime.html">datetime</a><br>
<a href="localConfig.html">localConfig</a><br>
<a href="xml.dom.minidom.html">xml.dom.minidom</a><br>
</td><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="plot.html">plot</a><br>
<a href="prjPySpec.html">prjPySpec</a><br>
<a href="pvConnect.html">pvConnect</a><br>
</td><td width="25%" valign=top><a href="shlex.html">shlex</a><br>
<a href="shutil.html">shutil</a><br>
<a href="subprocess.html">subprocess</a><br>
<a href="sys.html">sys</a><br>
</td><td width="25%" valign=top><a href="time.html">time</a><br>
<a href="wwwServerTransfers.html">wwwServerTransfers</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-add_pv"><strong>add_pv</strong></a>(mne, pv, desc, fmt)</dt><dd><tt>Connect&nbsp;to&nbsp;another&nbsp;EPICS&nbsp;process&nbsp;variable,&nbsp;uses&nbsp;pvConnect&nbsp;module</tt></dd></dl>
 <dl><dt><a name="-buildReport"><strong>buildReport</strong></a>()</dt><dd><tt>build&nbsp;the&nbsp;report</tt></dd></dl>
 <dl><dt><a name="-getSpecFileName"><strong>getSpecFileName</strong></a>(pv)</dt><dd><tt>construct&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;file,&nbsp;based&nbsp;on&nbsp;a&nbsp;PV</tt></dd></dl>
 <dl><dt><a name="-getTime"><strong>getTime</strong></a>()</dt><dd><tt>return&nbsp;a&nbsp;datetime&nbsp;value</tt></dd></dl>
 <dl><dt><a name="-insertPI"><strong>insertPI</strong></a>(xmlText, piText)</dt><dd><tt>insert&nbsp;XML&nbsp;Processing&nbsp;Instruction&nbsp;text&nbsp;after&nbsp;first&nbsp;line&nbsp;of&nbsp;XML</tt></dd></dl>
 <dl><dt><a name="-logException"><strong>logException</strong></a>(troublemaker)</dt><dd><tt>write&nbsp;an&nbsp;exception&nbsp;report&nbsp;to&nbsp;the&nbsp;log&nbsp;file</tt></dd></dl>
 <dl><dt><a name="-logMessage"><strong>logMessage</strong></a>(msg)</dt><dd><tt>write&nbsp;a&nbsp;message&nbsp;with&nbsp;a&nbsp;timestamp&nbsp;and&nbsp;pid&nbsp;to&nbsp;the&nbsp;log&nbsp;file</tt></dd></dl>
 <dl><dt><a name="-main"><strong>main</strong></a>()</dt><dd><tt>run&nbsp;the&nbsp;main&nbsp;loop</tt></dd></dl>
 <dl><dt><a name="-makeSimpleTag"><strong>makeSimpleTag</strong></a>(tag, value)</dt><dd><tt>create&nbsp;a&nbsp;simple&nbsp;XML&nbsp;tag/value&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-monitor_receiver"><strong>monitor_receiver</strong></a>(epics_args, user_args)</dt><dd><tt>Response&nbsp;to&nbsp;an&nbsp;EPICS&nbsp;monitor&nbsp;on&nbsp;the&nbsp;channel,&nbsp;uses&nbsp;pvConnect&nbsp;module<br>
@param&nbsp;value:&nbsp;str(epics_args['pv_value'])</tt></dd></dl>
 <dl><dt><a name="-report"><strong>report</strong></a>()</dt><dd><tt>write&nbsp;the&nbsp;values&nbsp;out&nbsp;to&nbsp;files</tt></dd></dl>
 <dl><dt><a name="-shellCommandToFile"><strong>shellCommandToFile</strong></a>(command, outFile)</dt><dd><tt>execute&nbsp;a&nbsp;shell&nbsp;command&nbsp;and&nbsp;write&nbsp;its&nbsp;output&nbsp;to&nbsp;a&nbsp;file</tt></dd></dl>
 <dl><dt><a name="-updatePlotImage"><strong>updatePlotImage</strong></a>()</dt><dd><tt>make&nbsp;a&nbsp;new&nbsp;PNG&nbsp;file&nbsp;with&nbsp;the&nbsp;most&nbsp;recent&nbsp;USAXS&nbsp;scans</tt></dd></dl>
 <dl><dt><a name="-updateSpecMacroFile"><strong>updateSpecMacroFile</strong></a>()</dt><dd><tt>copy&nbsp;the&nbsp;current&nbsp;SPEC&nbsp;macro&nbsp;file&nbsp;to&nbsp;the&nbsp;WWW&nbsp;page&nbsp;space</tt></dd></dl>
 <dl><dt><a name="-writeFile"><strong>writeFile</strong></a>(file, contents)</dt><dd><tt>write&nbsp;contents&nbsp;to&nbsp;file</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>GLOBAL_MONITOR_COUNTER</strong> = 0<br>
<strong>MAINLOOP_COUNTER_TRIGGER</strong> = 10000<br>
<strong>PVLIST_FILE</strong> = 'pvlist.xml'<br>
<strong>SVN_ID</strong> = '$Id: pvwatch.py 383 2010-07-25 02:49:05Z jemian $'<br>
<strong>pvdb</strong> = {}<br>
<strong>xref</strong> = {}</td></tr></table>
</body></html>